# 摄像头访问故障排除指南

如果遇到"无法访问摄像头"的问题，请按照以下步骤排查：

## 1. 浏览器权限设置

### Chrome/Edge 浏览器
1. 点击地址栏左侧的摄像头图标（🔒或📷）
2. 选择"允许"或"始终允许此网站使用摄像头"
3. 如果看不到图标，前往：
   - 设置 > 隐私和安全 > 网站设置 > 摄像头
   - 找到 `localhost:8080` 并设置为"允许"

### Safari 浏览器
1. Safari > 偏好设置 > 网站 > 摄像头
2. 找到 `localhost` 并设置为"允许"
3. 系统偏好设置 > 安全性与隐私 > 摄像头
4. 确保 Safari 在允许列表中

### Firefox 浏览器
1. 点击地址栏左侧的锁图标
2. 选择"权限" > "使用摄像头" > "允许"
3. 或前往：设置 > 隐私与安全 > 权限 > 摄像头

## 2. macOS 系统权限

1. 打开"系统偏好设置"（或"系统设置"）
2. 进入"安全性与隐私"（或"隐私与安全性"）
3. 选择"摄像头"标签
4. 确保你的浏览器（Chrome/Safari/Firefox）在允许列表中
5. 如果不在，取消勾选并重新勾选浏览器旁边的复选框

## 3. 检查摄像头是否被占用

1. 关闭其他可能使用摄像头的应用：
   - Zoom、Skype、Teams 等视频会议软件
   - FaceTime、微信视频等
   - 其他浏览器标签页
2. 重启浏览器
3. 如果问题仍然存在，重启电脑

## 4. 浏览器兼容性

推荐使用以下浏览器：
- ✅ Chrome 90+（推荐）
- ✅ Edge 90+
- ✅ Firefox 88+
- ⚠️ Safari 14+（可能需要额外配置）

## 5. 网络和协议要求

- ✅ `localhost` 或 `127.0.0.1` 可以直接访问摄像头
- ✅ HTTPS 网站可以访问摄像头
- ❌ HTTP 网站（非localhost）无法访问摄像头

## 6. 硬件检查

1. 确认摄像头硬件正常工作：
   - 打开"系统偏好设置" > "安全性与隐私" > "摄像头"
   - 测试摄像头是否能在其他应用中正常工作
2. 检查摄像头驱动是否最新
3. 尝试外接USB摄像头（如果是MacBook）

## 7. 常见错误及解决方案

### "NotAllowedError" - 权限被拒绝
- 按照步骤1和2设置浏览器和系统权限

### "NotFoundError" - 未找到摄像头
- 检查摄像头是否连接
- 检查系统设置中的摄像头权限

### "NotReadableError" - 摄像头被占用
- 关闭其他使用摄像头的应用
- 重启浏览器

### "OverconstrainedError" - 约束不满足
- 尝试使用其他浏览器
- 检查摄像头是否支持请求的分辨率

## 8. 调试步骤

1. 打开浏览器开发者工具（F12 或 Cmd+Option+I）
2. 查看"控制台"标签页的错误信息
3. 查看"网络"标签页，确认MediaPipe库是否加载成功
4. 尝试在控制台运行：
   ```javascript
   navigator.mediaDevices.getUserMedia({ video: true })
     .then(stream => console.log('摄像头可用', stream))
     .catch(err => console.error('摄像头错误', err));
   ```

## 9. 重置权限

如果以上方法都不行，尝试重置权限：

1. **Chrome/Edge:**
   - 设置 > 隐私和安全 > 网站设置 > 摄像头
   - 找到 `localhost:8080`，点击"重置权限"

2. **Safari:**
   - Safari > 偏好设置 > 网站 > 摄像头
   - 删除 `localhost` 的权限设置，重新授权

3. **系统级别:**
   - 系统偏好设置 > 安全性与隐私 > 摄像头
   - 取消勾选浏览器，然后重新勾选

## 10. 联系支持

如果问题仍然存在，请提供以下信息：
- 浏览器名称和版本
- 操作系统版本
- 控制台错误信息（F12 > Console）
- 具体的错误提示内容

